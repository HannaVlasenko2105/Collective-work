#include <stdio.h>
#include <string.h>

struct User {
  char username[100];
  char password[100];
  char name[100];
  char email[100];
  char number[50];
};

struct Order {
  char type[50];
  char address[100];
  char city[50];
  int floor, area;
  float price;
  int months;
};

struct ApartmentsInfo {
  char type[50];
  char address[100];
  char city[50];
  int rooms, floor, area;
  float price;
};

struct ApartmentsInfo apartments[10];

struct User newUser;

struct Order orders[10];
int orderCount = 0;

void createAccount(){
  printf("\n-------Створення нового акаунту------\n");
  printf("\nВведіть своє ім'я користувача: ");
  scanf("%s", newUser.username);
  printf("Введіть свій пароль: ");
  scanf("%s", newUser.password);
  printf("Введіть своє ім'я: ");
  scanf("%s", newUser.name);
  printf("Введіть свою електронну адресу: ");
  scanf("%s", newUser.email);
  printf("Введіть свій номер телефону: ");
  scanf("%s", newUser.number);
  printf("\nАкаунт успішно створено!\n");
  printf("-------------------------------------\n");
}

void login() {
  char username[100];
  char password[100];
  printf("\n-----------Вхід в систему------------\n");
  printf("\nВведіть своє ім'я користувача: ");
  scanf("%s", username);
  if (strcmp(username, newUser.username) != 0) {
    printf("Неправильне ім'я користувача.\n");
  } else {
    printf("Введіть свій пароль: ");
    scanf("%s", password);
    if (strcmp(password, newUser.password) != 0) {
      printf("Неправильний пароль.\n");
    } else {
      printf("Увійшли як %s.\n", username);
    }
  }
  printf("-------------------------------------\n");
}

void viewAccountInfo(struct User newUser) {
  printf("\n--------------Ваш акаунт--------------\n");
  printf("Ім'я користувача: %s\n", newUser.username);
  printf("Пароль: %s\n", newUser.password);
  printf("Ім'я: %s\n", newUser.name);
  printf("Електронна пошта: %s\n", newUser.email);
  printf("Номер телефону: %s\n", newUser.number);
  printf("-------------------------------------\n");
}

void changeMonths() {
  int orderNumber;
  int newDuration;
  int choice;

  printf("Введіть номер замовлення: ");
  scanf("%d", &orderNumber);

  orderNumber--;

  if (orderNumber < 0 || orderNumber >= orderCount) {
      printf("Невірний номер замовлення.\n");
      return;
  }

  printf("Введіть нову тривалість оренди (у місяцях): ");
  scanf("%d", &newDuration);

  printf("Ви бажаєте змінити тривалість оренди для замовлення №%d на %d місяців?\n", orderNumber + 1, newDuration);
  printf("(1 - Так/0 - Ні)\n");
  printf("Ваш вибір: ");
  scanf("%d", &choice);
}

void cancelOrder() {
  int orderNumber;
  int choice;

  printf("Введіть номер замовлення: ");
  scanf("%d", &orderNumber);
  orderNumber--;

  if (orderNumber < 0 || orderNumber >= orderCount) {
      printf("Невірний номер замовлення.\n");
      return;
  }

  printf("Ви бажаєте скасувати замовлення №%d?\n", orderNumber + 1);
  printf("(1 - Так/0 - Ні)\n");
  printf("Ваш вибір: ");
  scanf("%d", &choice);

  if (choice == 1) {
      orders[orderNumber].months = 0;
      printf("Замовлення №%d було скасовано.\n", orderNumber + 1);
  } else if (choice == 0) {
      printf("Замовлення №%d не було скасовано.\n", orderNumber + 1);
  } else {
      printf("Невірний вибір. Будь ласка, введіть 1 або 0.\n");
  }
}

void rentApartment() {
  printf("\n-------Пошук і оренда квартири-------\n");
  printf("Введіть тип квартири(1-кімнатна, 2-кімнатна, 3-кімнатна): \n");
  char type[50];
  scanf("%s", type);

  printf("Введіть місто (Київ, Львів, Чернівці, Полтава): \n");
  char city[50];
  scanf("%s", city);

  int rent;
      printf("\nБажаєте орендувати цю квартиру? (1-так/0-ні): ");
      scanf("%d", &rent);
      if (rent == 1) {
        orders[orderCount] =
            (struct Order){.type = "",
                           .address = "",
                           .city = "",
                           .floor = apartments[i].floor,
                           .area = apartments[i].area,
                           .price = apartments[i].price,
                           .months = 0};
        strcpy(orders[orderCount].type, apartments[i].type);
        strcpy(orders[orderCount].address, apartments[i].address);
        strcpy(orders[orderCount].city, apartments[i].city);
        printf("Введіть тривалість оренди (місяців): ");
        scanf("%d", &orders[orderCount].months);
        printf("Замовлення успішно створено!\n");
        orderCount++;
      }
      found = 1;
      break;
    }
  }
if (!found) {
    printf("Квартира не знайдена.\n");
  }
  printf("-------------------------------------\n");
}


int main() {
  
  strcpy(apartments[0].type, "1-кімнатна");
  strcpy(apartments[0].address, "Вул. Сумська, 45");
  strcpy(apartments[0].city, "Львів");
  apartments[0].floor = 3;
  apartments[0].area = 40;
  apartments[0].price = 5000;

  strcpy(apartments[1].type, "2-кімнатна");
  strcpy(apartments[1].address, "Вул. Мазепи, 15");
  strcpy(apartments[1].city, "Львів");
  apartments[1].floor = 5;
  apartments[1].area = 60;
  apartments[1].price = 8000;

  strcpy(apartments[2].type, "3-кімнатна");
  strcpy(apartments[2].address, "Вул. Грушевського, 10");
  strcpy(apartments[2].city, "Чернівці");
  apartments[2].floor = 2;
  apartments[2].area = 90;
  apartments[2].price = 12000;

  strcpy(apartments[3].type, "1-кімнатна");
  strcpy(apartments[3].address, "Вул. Шевченка, 20");
  strcpy(apartments[3].city, "Київ");
  apartments[3].floor = 1;
  apartments[3].area = 35;
  apartments[3].price = 4000;

  strcpy(apartments[4].type, "2-кімнатна");
  strcpy(apartments[4].address, "Вул. Франка, 30");
  strcpy(apartments[4].city, "Київ");
  apartments[4].floor = 4;
  apartments[4].area = 55;
  apartments[4].price = 7000;

  strcpy(apartments[5].type, "3-кімнатна");
  strcpy(apartments[5].address, "Вул. Бандери, 5");
  strcpy(apartments[5].city, "Київ");
  apartments[5].floor = 6;
  apartments[5].area = 85;
  apartments[5].price = 11000;

  strcpy(apartments[6].type, "1-кімнатна");
  strcpy(apartments[6].address, "Вул. Миру, 8");
  strcpy(apartments[6].city, "Полтава");
  apartments[6].floor = 2;
  apartments[6].area = 38;
  apartments[6].price = 4500;

  strcpy(apartments[7].type, "2-кімнатна");
  strcpy(apartments[7].address, "Вул. Лесі Українки, 12");
  strcpy(apartments[7].city, "Полтава");
  apartments[7].floor = 3;
  apartments[7].area = 65;
  apartments[7].price = 7500;

  strcpy(apartments[8].type, "3-кімнатна");
  strcpy(apartments[8].address, "Вул. Незалежності, 22");
  strcpy(apartments[8].city, "Чернівці");
  apartments[8].floor = 4;
  apartments[8].area = 95;
  apartments[8].price = 13000;

  strcpy(apartments[9].type, "1-кімнатна");
  strcpy(apartments[9].address, "Вул. Свободи, 18");
  strcpy(apartments[9].city, "Чернівці");
  apartments[9].floor = 5;
  apartments[9].area = 42;
  apartments[9].price = 5200;

  int choice;
  do {
    displayMenu();
    printf("\nОберіть пункт меню: ");
    scanf("%d", &choice);
    switch (choice) {
    case 1:
      createAccount();
      break;
    case 2:
      login();
      break;
    case 3:
      viewAccountInfo(newUser);
      break;
    case 4:
      viewOrders();
      break;
    case 5:
      displayApartments();
      break;
    case 6:
      rentApartment();
      break;
    case 7:
      printf("\nВихід з програми\n");
      break;
    default:
      printf("Невірний вибір. Спробуйте ще раз.\n");
      printf("-------------------------------------\n");
      break;
    }
  } while (choice != 7);

}
